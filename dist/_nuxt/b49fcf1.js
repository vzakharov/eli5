(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{299:function(e,t,r){var content=r(326);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(102).default)("5ec49056",content,!0,{sourceMap:!1})},325:function(e,t,r){"use strict";r(299)},326:function(e,t,r){var n=r(101)(!1);n.push([e.i,"#response a[data-v-4c475382]{text-decoration:none;color:inherit;cursor:pointer!important}",""]),e.exports=n},330:function(e,t,r){"use strict";r.r(t);r(5),r(4),r(2),r(1),r(6),r(3),r(7);var n=r(33),o=r(32),c=r(0),l=(r(77),r(215),r(35),r(37),r(289)),h=r.n(l),f=r(329),m=(r(12),r(20),r(16),r(46),r(53),r(78),r(323)),d=["properties"];function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function w(e){var t=h.a.create({baseURL:"https://ideality.app/api/notion/",headers:y({},e?{Authorization:"Bearer ".concat(e)}:{})});Object.assign(this,{createPage:function(e){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,l,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.parent,o=e.properties,e.content,r.next=3,t.post("pages",{parent:n,properties:Object(m.chain)(o).mapValues((function(e,t){return"string"==typeof e?Object(c.a)({},"name"===t?"title":"rich_text",[{text:{content:e}}]):"number"==typeof e?{number:e}:void 0})).mapKeys((function(e,t){return Object(m.upperFirst)(t).replace(/([a-z])([A-Z])/g,"$1 $2")})).value()});case 3:return l=r.sent,x(data=l.data),r.abrupt("return",data);case 7:case"end":return r.stop()}}),r)})))()},getPage:function(e){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.get("pages/".concat(e));case 2:return n=r.sent,x(data=n.data),r.abrupt("return",data);case 6:case"end":return r.stop()}}),r)})))()},getUser:function(){return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}throw new Error("No token provided. Please use an instance of Notion with a token.");case 2:return r.next=4,t.get("users/me");case 4:return r.abrupt("return",r.sent.data);case 5:case"end":return r.stop()}}),r)})))()},queryDatabase:function(e,r){return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.post("databases/".concat(e,"/query"),r);case 2:return n.abrupt("return",n.sent.data.results.map((function(e){e.properties;var details=Object(f.a)(e,d);return x(e),y(y({},e.properties),{},{details:details})})));case 3:case"end":return n.stop()}}),n)})))()},getBlock:function(e){var r=arguments,n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var c,l,h,f,data;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=r.length>1&&void 0!==r[1]?r[1]:{},l=c.recurse,h=void 0!==l&&l,o.next=3,t.get("blocks/".concat(e));case 3:if(f=o.sent,data=f.data,!f.data.has_children){o.next=10;break}return o.next=9,n.getBlockChildren(e,{recurse:h});case 9:data.children=o.sent;case 10:return o.abrupt("return",data);case 11:case"end":return o.stop()}}),o)})))()},getBlockChildren:function(e){var r=arguments,n=this;return Object(o.a)(regeneratorRuntime.mark((function c(){var l,h,f,m,d;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return l=r.length>1&&void 0!==r[1]?r[1]:{},h=l.recurse,f=void 0!==h&&h,c.next=3,t.get("blocks/".concat(e,"/children"));case 3:if(m=c.sent,d=m.data.results,!f){c.next=8;break}return c.next=8,Promise.all(d.map(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.has_children){e.next=5;break}return e.next=4,n.getBlockChildren(t.id,{recurse:f});case 4:t.children=e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return c.abrupt("return",d);case 9:case"end":return c.stop()}}),c)})))()}})}function x(data){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"properties";data[e]=Object(m.chain)(data[e]).mapKeys((function(e,t){return Object(m.camelCase)(t)})).mapValues((function(object,e){var t,r=function e(object){return null!=object&&object.type?e(object[object.type]):object}(object);["title","rich_text"].includes(object.type)&&(r=null===(t=r[0])||void 0===t?void 0:t.plain_text);return r})).value()}w.anon=new w;var O=w;function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j={head:function(){return{title:(this.query?"".concat(this.query," · "):"")+"Explain like I’m five!",meta:[{name:"description",content:"A simple tool to explain anything to your kids. Or to yourself, for that matter."}]}},data:function(){return{settings:{hintShown:!1,numQueries:0},query:"",thinking:!1,response:null,suggestToPay:!1}},mounted:function(){this.settings=_(_({},this.settings),JSON.parse(localStorage.getItem("settings")||"{}")),this.$watch("settings",(function(e){return localStorage.setItem("settings",JSON.stringify(e))}),{deep:!0}),this.$watch("$route.query.q",{immediate:!0,handler:function(e){e&&(this.query=e,this.run())}})},computed:{alwaysTrue:{get:function(){return!0},set:function(){}}},methods:{getToxicity:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,c,l,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o="<|endoftext|>".concat(e,"\n--\nLabel:"),r.prev=1,r.next=4,h.a.post("https://api.openai.com/v1/engines/content-filter-alpha/completions",{prompt:"<|endoftext|>".concat(o,"\n--\nLabel:"),temperature:0,top_p:0,max_tokens:1,logprobs:10},{headers:{Authorization:"Bearer ".concat(t.settings.apiKey)}});case 4:return c=r.sent,l=Object(n.a)(c.data.choices,1),f=l[0].text,r.abrupt("return",Number(f.trim()));case 10:return r.prev=10,r.t0=r.catch(1),console.error(r.t0),r.abrupt("return",2);case 14:case"end":return r.stop()}}),r,null,[[1,10]])})))()},run:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,c,l,f,m,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.thinking=!0,t.prev=1,t.next=4,O.anon.queryDatabase("5ca0388787084b828280c22df2565e9b",{filter:{property:"Name",title:{equals:e.query.toLowerCase()}}});case 4:if(r=t.sent,o=Object(n.a)(r,1),c=o[0],!(l=(c=void 0===c?{}:c).response)){t.next=12;break}return e.thinking=!1,t.abrupt("return",e.response=l);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.error(t.t0);case 17:return f=e.query,t.prev=18,t.next=21,h.a.post("https://ideality.app/api/eli5/",{query:f});case 21:m=t.sent,d=m.data.response,O.anon.createPage({parent:{database_id:"5ca0388787084b828280c22df2565e9b"},properties:{name:e.query.toLowerCase(),response:d}}),e.settings.numQueries++,e.settings.numQueries%20==0&&(e.suggestToPay=!0),e.response=d,t.next=33;break;case 29:t.prev=29,t.t1=t.catch(18),console.error(t.t1),e.$bvToast.toast("Error: ".concat((null===(v=t.t1.response)||void 0===v?void 0:v.data.error)||t.t1.message),{title:"Error",variant:"danger",solid:!0,autoHideDelay:5e3});case 33:return t.prev=33,e.thinking=!1,t.finish(33);case 36:case"end":return t.stop()}}),t,null,[[1,14],[18,29,33,36]])})))()},submit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$router.push({query:{q:e.query}});case 1:case"end":return t.stop()}}),t)})))()}},watch:{response:function(e){var t=this;if(e&&!this.settings.hintShown){var r=setInterval((function(){t.settings.hintShown=!t.settings.hintShown}),500);setTimeout((function(){clearInterval(r),t.settings.hintShown=!0}),3e3)}}}},P=(r(325),r(73)),component=Object(P.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-5"},[r("b-modal",{attrs:{"no-close-on-backdrop":"","no-close-on-esc":"","hide-header":"","hide-footer":"",title:"API Quota Exceeded",size:"lg",centered:""},model:{value:e.alwaysTrue,callback:function(t){e.alwaysTrue=t},expression:"alwaysTrue"}},[r("h1",[e._v("Oops! Quota exceeded")]),e._v(" "),r("p",[e._v("You guys used this tool so much (which is great!) that we’ve run out of our API quota.")]),e._v(" "),r("p",[e._v("Come back on the 1st of the next month.")]),e._v(" "),r("p",[e._v("In the meantime, you can "),r("a",{attrs:{href:"https://vzakharov.github.io/buy-me-a-beer"}},[e._v("buy me a beer")]),e._v("\n    so that I can continue spending all the money on it ;-)")])]),e._v(" "),r("b-row",[r("b-col",{staticClass:"text-center font-weight-bold",style:{fontSize:"1.5em",maxWidth:"600px",margin:"0 auto"}},[r("h1",{staticClass:"display-4"},[e._v("\n        Explain like I’m five!\n        ")]),e._v(" "),r("p",{staticClass:"lead"},[e._v("\n        This is a simple tool to explain anything to your kids. Or to yourself, for that matter.\n      ")]),e._v(" "),r("b-form",{staticClass:"mt-5",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("b-form-group",{attrs:{label:"What’s on your mind?","label-for":"query"}},[r("b-input",{staticStyle:{margin:"auto","font-size":"1em","font-weight":"light"},attrs:{id:"query",placeholder:"A term, a question, anything, basically."},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),e._v(" "),r("b-button",{staticClass:"mt-3",attrs:{type:"submit",disabled:!e.query,variant:"primary",size:"lg"}},[e._v("\n          Explain like I’m five!\n        ")])],1),e._v(" "),e.thinking?r("b-spinner",{staticClass:"mt-3",attrs:{type:"grow",variant:"primary"}}):e.response?r("div",[r("div",{staticClass:"my-5",attrs:{id:"response"}},e._l(e.response.split(/\b/),(function(t,i){return r(t.match(/^\w+$/)?"nuxt-link":"span",{key:i,tag:"component",attrs:{to:t.match(/^\w+$/)?{query:{q:t}}:void 0},domProps:{textContent:e._s(t)}})})),1),e._v(" "),e.settings.hintShown?e._e():r("div",{staticClass:"mt-3 text-muted font-weight-light",staticStyle:{"font-size":"0.8em"}},[e._v("\n          👆 Click on any word to explain it!\n        ")])]):e._e()],1)],1),e._v(" "),r("div",{staticStyle:{position:"fixed",bottom:"10px",right:"10px","z-index":"1"}},[r("a",{staticStyle:{"text-decoration":"none",color:"#ccc"},attrs:{href:"https://vzakharov.github.io/buy-me-a-beer",target:"_blank"}},[e._v("\n      Buy me a 🍺\n    ")])]),e._v(" "),r("b-modal",{attrs:{id:"buy-me-a-beer",title:"Enjoying ELI5?","hide-footer":""},model:{value:e.suggestToPay,callback:function(t){e.suggestToPay=t},expression:"suggestToPay"}},[r("p",[e._v("Seems like you’re really enjoying this tool, and that’s great!")]),e._v(" "),r("p",[e._v("While the tool is free for you, it actually costs me some money to send the requests to the API.")]),e._v(" "),r("p",[e._v("So if you want to support me, you can do this here:")]),e._v(" "),r("b-button",{attrs:{variant:"primary",size:"lg",href:"https://vzakharov.github.io/buy-me-a-beer",target:"_blank"}},[e._v("\n      Buy me a 🍺\n    ")]),e._v(" "),r("p",{staticClass:"mt-3"},[e._v("Thank you!")])],1)],1)}),[],!1,null,"4c475382",null);t.default=component.exports}}]);